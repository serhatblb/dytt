<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KÃœTÃœK DETAY LÄ°STESÄ°</title>

    <!-- Ortak CSS -->
    <link rel="stylesheet" href="style.css">

    <style>
        .table-scroll-wrapper {
            overflow-x: auto;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        .data-table {
            border-collapse: collapse;
            width: max-content;
            min-width: 100%;
        }

        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: center;
            white-space: nowrap;
            font-size: 13px;
        }

        .data-table thead {
            background-color: #f4f6f9;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .data-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .filter-section {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-section label {
            display: block;
        }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <div id="sidebar"></div>
    <script>
        fetch('sidebar.html')
            .then(res => res.text())
            .then(data => document.getElementById('sidebar').innerHTML = data);
    </script>

    <div class="content-wrapper">

        <h1 class="report-title">Proses Parametreleri Takip Raporu</h1>

        <!-- ðŸ”µ Filtre AlanÄ± -->
        <div class="filter-section">
            <div>
                <label>BaÅŸlangÄ±Ã§ Tarihi<br><input type="date"></label>
            </div>
            <div>
                <label>BitiÅŸ Tarihi<br><input type="date"></label>
            </div>

            <div>
                <label>KÃ¼tÃ¼k ID<br><input type="text" placeholder="Ã–rn: 2510021301"></label>
            </div>
            <div>
                <label>ÃœrÃ¼n Mal Grubu<br>
                    <select id="urunSelect">
                        <option value="garet">GARET</option>
                        <option value="incekangal">Ä°NCE KANGAL</option>
                        <option value="sbq">SBQ</option>
                        <option value="nis">NERVÃœRLÃœ Ä°NÅžAAT Ã‡ELÄ°ÄžÄ°</option>
                    </select>
                </label>
            </div>
            <div>
                <button class="primary-button">Liste Getir</button>
                <button class="excel-button">Excel Rapor</button>
            </div>
        </div>

        <!-- ðŸ”µ TABLO -->
        <div class="table-scroll-wrapper">
            <table class="data-table">
                <thead>
                    <tr id="tableHead"></tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>

    </div>

<script>
// ======================
// 1) KOLON KONFÄ°GÃœRLERÄ°
// ======================

    const columnConfig = {
    incekangal: [
        "KUTUK_ID",
        "Ä°Åž EMRÄ° NO",
        "DÃ–KÃœM NUMARASI",
        "KÃœTÃœK EBATI",
        "KALÄ°TE",
        "Ã‡AP",
        "ÃœRETÄ°M TARÄ°HÄ°",
        "FIRIN ÅžARJ ZAMANI",
        "FIRIN DEÅžARJ ZAMANI",
        "FIRINDA KALMA SÃœRESÄ°",
        "FIRIN BASINCI (ORTALAMA)",
        "FIRIN DEÅžARJ SICAKLIÄžI (ORTALAMA)",
        "DESCALER BASINCI (ORTALAMA)",
        "HADDE GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 1 BASINCI (ORTALAMA)",
        "WATER BOX 1 AKIÅž (ORTALAMA)",
        "MEER DRIVE GÄ°RÄ°Åž SICAKLIÄžI",
        "WATER BOX 4 BASINCI (ORTALAMA)",
        "WATER BOX 4 AKIÅž (ORTALAMA)",
        "WATER BOX 5 BASINCI (ORTALAMA)",
        "WATER BOX 5 AKIÅž (ORTALAMA)",
        "WATER BOX 6 BASINCI (ORTALAMA)",
        "WATER BOX 6 AKIÅž (ORTALAMA)",
        "WATER BOX 7 BASINCI (ORTALAMA)",
        "WATER BOX 7 AKIÅž (ORTALAMA)",
        "TBM GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 8 BASINCI (ORTALAMA)",
        "WATER BOX 8 AKIÅž (ORTALAMA)",
        "HIPROFILE Ã–LÃ‡ÃœM VERÄ°LERÄ°",
        "SERME KAFA SICAKLIÄžI (ORTALAMA)",
        "LCC KAPAK DURUMU (AÃ§Ä±k / KapalÄ±)",
        "FAN DURUMU (RPM)",
        "KONVEYÃ–R HIZLARI (m/sn)"
    ],

    garet: [
        "KUTUK_ID",
        "Ä°Åž EMRÄ° NO",
        "DÃ–KÃœM NUMARASI",
        "KÃœTÃœK EBATI",
        "KALÄ°TE",
        "Ã‡AP",
        "ÃœRETÄ°M TARÄ°HÄ°",
        "FIRIN ÅžARJ ZAMANI",
        "FIRIN DEÅžARJ ZAMANI",
        "FIRINDA KALMA SÃœRESÄ°",
        "FIRIN BASINCI (ORTALAMA)",
        "FIRIN DEÅžARJ SICAKLIÄžI (ORTALAMA)",
        "DESCALER BASINCI (ORTALAMA)",
        "HADDE GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 1 BASINCI (ORTALAMA)",
        "WATER BOX 1 AKIÅž (ORTALAMA)",
        "PSM SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 2 BASINCI (ORTALAMA)",
        "WATER BOX 2 AKIÅž (ORTALAMA)",
        "TBK Ã–LÃ‡ÃœM VERÄ°LERÄ°",
        "BASKET DÃ–KÃœLÃœÅž SICAKLIÄžI (ORTALAMA)",
        "FAN1 (AÃ§Ä±k / KapalÄ±)",
        "FAN2 (AÃ§Ä±k / KapalÄ±)",
        "KAPAK DURUMU (AÃ§Ä±k / KapalÄ±)",
    ],
    
    sbq: [
        "KUTUK_ID",
        "Ä°Åž EMRÄ° NO",
        "DÃ–KÃœM NUMARASI",
        "KÃœTÃœK EBATI",
        "KALÄ°TE",
        "Ã‡AP",
        "ÃœRETÄ°M TARÄ°HÄ°",
        "FIRIN ÅžARJ ZAMANI",
        "FIRIN DEÅžARJ ZAMANI",
        "FIRINDA KALMA SÃœRESÄ°",
        "FIRIN BASINCI (ORTALAMA)",
        "FIRIN DEÅžARJ SICAKLIÄžI (ORTALAMA)",
        "DESCALER BASINCI (ORTALAMA)",
        "HADDE GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 1 BASINCI (ORTALAMA)",
        "WATER BOX 1 AKIÅž (ORTALAMA)",
        "PSM SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 2 BASINCI (ORTALAMA)",
        "WATER BOX 2 AKIÅž (ORTALAMA)",
        "TBK Ã–LÃ‡ÃœM VERÄ°LERÄ°",
        "IZGARAYA GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
    ],
    
    nis: [
        "KUTUK_ID",
        "Ä°Åž EMRÄ° NO",
        "DÃ–KÃœM NUMARASI",
        "KÃœTÃœK EBATI",
        "KALÄ°TE",
        "Ã‡AP",
        "ÃœRETÄ°M TARÄ°HÄ°",
        "FIRIN ÅžARJ ZAMANI",
        "FIRIN DEÅžARJ ZAMANI",
        "FIRINDA KALMA SÃœRESÄ°",
        "FIRIN BASINCI (ORTALAMA)",
        "FIRIN DEÅžARJ SICAKLIÄžI (ORTALAMA)",
        "DESCALER BASINCI (ORTALAMA)",
        "HADDE GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 1 BASINCI (ORTALAMA)",
        "WATER BOX 1 AKIÅž (ORTALAMA)",
        "PSM SICAKLIÄžI (ORTALAMA)",
        "WATER BOX 2 BASINCI (ORTALAMA)",
        "WATER BOX 2 AKIÅž (ORTALAMA)",
        "TBK Ã–LÃ‡ÃœM VERÄ°LERÄ°",
        "IZGARAYA GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)",
      ]
};

let activeColumns = []; // seÃ§ilen Ã¼rÃ¼nÃ¼n kolon baÅŸlÄ±klarÄ±

// ==========================
// 2) RANDOM YARDIMCI FONKS.
// ==========================
function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
function randFloat(min, max, digits = 1) {
    return (min + Math.random() * (max - min)).toFixed(digits);
}
function pad(n) {
    return n < 10 ? "0" + n : "" + n;
}
function dmy(d) {
    return `${pad(d.getDate())}.${pad(d.getMonth() + 1)}.${d.getFullYear()}`;
}
function randomDateStr() {
    const base = new Date(2025, 0, 1); // 01.01.2025
    const day = new Date(base.getTime() + 86400000 * rand(0, 20));
    return dmy(day);
}
function randomDateTimeRange() {
    const date = randomDateStr();
    const sh = rand(8, 12);
    const eh = sh + rand(1, 3);
    const sm = pad(rand(0, 59));
    const em = pad(rand(0, 59));
    return `${date} ${pad(sh)}:${sm}â€“${pad(eh)}:${em}`;
}
function randomTimeRangeNoDate() {
    const sh = rand(8, 12);
    const eh = sh + rand(1, 3);
    const sm = pad(rand(0, 59));
    const em = pad(rand(0, 59));
    return `${pad(sh)}:${sm}â€“${pad(eh)}:${em}`;
}

// ==============================
// 3) TEK SATIR Ã–RNEK VERÄ° ÃœRET
// ==============================
function generateRow(productType, index) {
    const kaliteList = ["B420C_00", "B420C_01", "B500C_00", "R260"];
    const ebatList = ["150x150", "160x160", "170x170", "200x200"];
    const capList  = [8, 10, 12, 14, 16, 20, 25];
    const acKapa   = ["AÃ‡IK", "KAPALI"];
    const okNok    = ["OK", "NOK"];

    const cols = columnConfig[productType];
    const row = [];

    const uretimTarihi = randomDateStr();
    const sarjSaat = rand(6, 10);
    const desSaat = sarjSaat + rand(2, 4);
    const sarjZaman = `${uretimTarihi} ${pad(sarjSaat)}:${pad(rand(0,59))}`;
    const desZaman  = `${uretimTarihi} ${pad(desSaat)}:${pad(rand(0,59))}`;
    const kalma = `${(desSaat - sarjSaat) * 60 + rand(0, 15)} dk`;

    cols.forEach((c, i) => {
        let val = "-";

        if (c === "KUTUK_ID") {
            val = 25000000 + index;
        } else if (c.includes("Ä°Åž EMRÄ°")) {
            val = "40000" + (100 + index);
        } else if (c.includes("DÃ–KÃœM NUMARASI")) {
            val = 2512000 + index;
        } else if (c.includes("KÃœTÃœK EBATI")) {
            val = ebatList[rand(0, ebatList.length - 1)];
        } else if (c === "KALÄ°TE") {
            val = kaliteList[rand(0, kaliteList.length - 1)];
        } else if (c === "Ã‡AP") {
            val = capList[rand(0, capList.length - 1)];
        } else if (c === "ÃœRETÄ°M TARÄ°HÄ°") {
            val = uretimTarihi;
        } else if (c === "FIRIN ÅžARJ ZAMANI") {
            val = sarjZaman;
        } else if (c === "FIRIN DEÅžARJ ZAMANI") {
            val = desZaman;
        } else if (c.includes("FIRINDA KALMA SÃœRESÄ°")) {
            val = kalma;
        } else if (c.includes("BASINCI")) {
            val = randFloat(3.0, 7.0, 1) + " bar";
        } else if (c.includes("AKIÅž")) {
            val = randFloat(10, 20, 1) + " mÂ³";
        } else if (c.includes("SICAKLIÄžI")) {
            // giriÅŸ/Ã§Ä±kÄ±ÅŸ sÄ±caklÄ±klarÄ±
            if (c.includes("FIRIN") || c.includes("HADDE")) {
                val = rand(900, 1150) + " Â°C";
            } else if (c.includes("GÄ°RÄ°Åž") || c.includes("TBM") || c.includes("SERME")) {
                val = rand(400, 800) + " Â°C";
            } else {
                val = rand(350, 600) + " Â°C";
            }
        } else if (c.includes("FAN1") || c.includes("FAN2") || c.includes("KAPAK DURUMU")) {
            val = acKapa[rand(0, acKapa.length - 1)];
        } else if (c.includes("LCC KAPAK DURUMU")) {
            val = acKapa[rand(0, acKapa.length - 1)];
        } else if (c === "FAN DURUMU (RPM)") {
            val = `${rand(60, 95)}% / ${rand(800, 1400)} RPM`;
        } else if (c === "KONVEYÃ–R HIZLARI (m/sn)") {
            val = randFloat(2.0, 4.5, 2) + " m/sn";
        } else if (c === "HIPROFILE Ã–LÃ‡ÃœM VERÄ°LERÄ°") {
            val = "";
        } else if (c === "NERVÃœR Ã–LÃ‡ÃœM CÄ°HAZI VERÄ°SÄ°") {
            val = "";
        } else if (c === "TBK Ã–LÃ‡ÃœM VERÄ°LERÄ°") {
          val = "";
        } else if (c === "BASKET DÃ–KÃœLÃœÅž SICAKLIÄžI (ORTALAMA)") {
            val = rand(900, 1100) + " Â°C";
        } else if (c === "IZGARAYA GÄ°RÄ°Åž SICAKLIÄžI (ORTALAMA)") {
            val = rand(400, 650) + " Â°C";
        } else if (c === "MEER DRIVE GÄ°RÄ°Åž SICAKLIÄžI") {
            val = rand(400, 550) + " Â°C";
        } else if (c === "PSM SICAKLIÄžI (ORTALAMA)") {
            val = rand(450, 650) + " Â°C";
        } else if (c.includes("ÅžARJ ZAMANI") || c.includes("DEÅžARJ ZAMANI")) {
            val = randomDateTimeRange();
        }

        row.push(val);
    });

    return row;
}

// =============================
// 4) N SatÄ±rlÄ±k Ã–RNEK VERÄ° ÃœRET
// =============================
function generateSampleData(productType, rowCount = 5) {
    const rows = [];
    for (let i = 0; i < rowCount; i++) {
        rows.push(generateRow(productType, i + 1));
    }
    return rows;
}

// ========================
// 5) TABLO BAÅžLIKLARINI YAZ
// ========================
function updateTableHeaders(type) {
    const thead = document.getElementById("tableHead");
    activeColumns = columnConfig[type];
    thead.innerHTML = activeColumns.map(c => `<th>${c}</th>`).join("");
}

// ========================
// 6) SATIRLARI Ã‡Ä°Z
// ========================
function renderRows(type) {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    const rows = generateSampleData(type, 8); // 8 satÄ±r demo

    rows.forEach(row => {
        tbody.innerHTML += `
            <tr>
                ${row.map(v => `<td>${v}</td>`).join("")}
            </tr>
        `;
    });
}

// ========================
// 7) EVENT & INITIAL LOAD
// ========================
document.getElementById("urunSelect").addEventListener("change", function () {
    const val = this.value;
    updateTableHeaders(val);
    renderRows(val);
});

// Sayfa aÃ§Ä±lÄ±ÅŸÄ±nda GARET
updateTableHeaders("garet");
renderRows("garet");

</script>

</body>
</html>
